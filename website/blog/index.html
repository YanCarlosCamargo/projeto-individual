<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Maker | Blog</title>
    <link rel="stylesheet" href="../styles/blogHome.css">
    <link rel="stylesheet" href="../styles/fonts.css">
    <link rel="stylesheet" href="../styles/teste.css">
</head>

<body onload="buscarPosts()">

    <div class="overlay" id="loadingOverlay">
        <div class="overlay__inner">
            <div class="overlay__content"><span class="spinner"></span></div>
        </div>
    </div>
    <div class="containerMain">
        <div class="navContainer">
            <div class="logoContainer" onclick="window.location.href= '/'">
                <img src="./assets/img/design/logo.png" alt="">
                <span id="logoText">MAKERBLOG</span>
            </div>

            <div class="containerLinksNav">

                <div class="linkNav" onclick="buscarPosts()">Recarregar Feed</div>

                <div class="perfilWrapper">
                    <div class="loginContainer linkNav" id="btnLogin">
                        <div class="btnLogin" id="navName">Perfil</div>
                        <span id="imgProfile" alt=""></span>
                    </div>
                    <div class="dropdown">
                        <div class="dropdownItem" id="btnPerfil"><svg width="24" heigth="24" fill="white"
                                xmlns="http://www.w3.org/2000/svg"
                                viewBox="0 0 448 512"><!--! Font Awesome Pro 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2023 Fonticons, Inc. -->
                                <path
                                    d="M224 256A128 128 0 1 0 224 0a128 128 0 1 0 0 256zm-45.7 48C79.8 304 0 383.8 0 482.3C0 498.7 13.3 512 29.7 512H418.3c16.4 0 29.7-13.3 29.7-29.7C448 383.8 368.2 304 269.7 304H178.3z" />
                            </svg>Perfil</div>
                        <div class="dropdownItem" id="btnLogout"><svg width="24" heigth="24" fill="white"
                                xmlns="http://www.w3.org/2000/svg"
                                viewBox="0 0 512 512"><!--! Font Awesome Pro 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2023 Fonticons, Inc. -->
                                <path
                                    d="M377.9 105.9L500.7 228.7c7.2 7.2 11.3 17.1 11.3 27.3s-4.1 20.1-11.3 27.3L377.9 406.1c-6.4 6.4-15 9.9-24 9.9c-18.7 0-33.9-15.2-33.9-33.9l0-62.1-128 0c-17.7 0-32-14.3-32-32l0-64c0-17.7 14.3-32 32-32l128 0 0-62.1c0-18.7 15.2-33.9 33.9-33.9c9 0 17.6 3.6 24 9.9zM160 96L96 96c-17.7 0-32 14.3-32 32l0 256c0 17.7 14.3 32 32 32l64 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-64 0c-53 0-96-43-96-96L0 128C0 75 43 32 96 32l64 0c17.7 0 32 14.3 32 32s-14.3 32-32 32z" />
                            </svg> Sair</div>
                    </div>
                </div>
            </div>
        </div>

        <div class="containerConteudo">
            <div class="containerAbaLateral" id="containerAbaLateral">
                <span class="wrapperConteudoLateral" id="wrapperConteudoLateral">
                    <span id="imgProfileLateral" src="../assets/img/profile/profile.png" alt=""></span>
                    <p id="labelNome"></p>
                    <p class="labelBio" id="labelBio">"Slaa"</p>
                    <p class="labelCadastro" id="labelCadastro"></p>
                </span>
            </div>

            <div class="containerFeed">

                <div class="wrapperPosts">
                    <input class="imgPostExpandido" id="input-file" placeholder="Escolha a imagem do seu Post"
                        type="file" accept=".jpg,.jpeg"></input>
                    <div class="containerPostExpandido" id="containerPostExpandido">
                        <div class="wrapperImgPostExpandido" id="wrapperImg">

                        </div>
                        <div class="wrapperInfoPostExpandido">



                            <div class="wrapperDataTituloExpandido">
                                <input placeholder="Insira o Titulo do post" class="tituloPostExpandido"></input>
                                <svg id="idCloseNewPost" xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                                    viewBox="0 0 24 24">
                                    <path fill="currentColor"
                                        d="M6.4 19L5 17.6l5.6-5.6L5 6.4L6.4 5l5.6 5.6L17.6 5L19 6.4L13.4 12l5.6 5.6l-1.4 1.4l-5.6-5.6L6.4 19Z" />
                                </svg>
                            </div>

                            <input type="text" placeholder="Insira a descrição do novo post"
                                class="descricaoPostExpandido">
                            </input>
                            <button class="btn-file">Selecione a imagem</button>
                            <button id="btnNewPost" onclick="newPost()">Publicar Novo Post</button>

                        </div>

                    </div>

                    <div id="wrapperNovoPost" class="wrapperNovoPost">
                        Novo Post...
                    </div>


                    <div style="height: 50px; margin-top: 5%;"></div>
                    <span id="resultado" style="display: flex; align-items: center; flex-direction: column;">

                        <div class="containerPost">
                            <div class="wrapperImgPost">
                                <img class="imgPost" src="../assets/img/posts/post-example-1.png" alt="">
                            </div>
                            <div class="wrapperInfoPost">
                                <div class="wrapperDataTitulo">
                                    <div class="badgeData">
                                        05<br>
                                        06
                                    </div>
                                    <label class="tituloPost">Festa colorida Usando Fluido</label>
                                </div>
                                <label class="labelAutor">Por: zézin</label>
                                <label class="descricaoPost">é simplesmente um texto fictício da indústria
                                    tipográfica e
                                    de
                                    impressão. Lorem Ipsum tem sido o texto fictício padrão da indústria desde os
                                    anos
                                    1500,
                                    quando um impressor desconhecido pegou uma galera de tipos e os embaralhou para
                                    fazer um
                                    livro de espécimes de tipos. Ele sobreviveu não apenas a cinco séculos, mas
                                    também
                                    ao
                                    salto para a composição eletrônica, permanecendo essencialmente inalterado.
                                </label>
                                <div class="badgeLikesPost">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                                        <path fill="red"
                                            d="m12 21.35l-1.45-1.32C5.4 15.36 2 12.27 2 8.5C2 5.41 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.08C13.09 3.81 14.76 3 16.5 3C19.58 3 22 5.41 22 8.5c0 3.77-3.4 6.86-8.55 11.53L12 21.35Z" />
                                    </svg>
                                    <label class="labelLikesPost">397</label>
                                </div>
                            </div>
                        </div>
                    </span>
                </div>
                <div class="wrapperNoticias">
                    <h2 class="tituloRankign">Usuários com mais likes</h2>
                    <div class="wrapperCanva">
                        <canvas id="likesChart"></canvas>
                    </div>
                </div>
            </div>
        </div>

    </div>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="../js/verfificarSession.js"></script>
    <script src="../js/posts.js"></script>

    <script>
        var graficoGerado

        fetch('/buscarRankLikes')
            .then(response => response.json())
            .then(data => {
                console.log(data);
                data = data[0]
                const usuarios = []
                const likes = []
                for (let i = 0; i < 5; i++) {
                    usuarios.push(data[i].apelido)
                    likes.push(data[i].total_likes)
                }
                console.log(usuarios, likes);
                const ctx = document.getElementById('likesChart').getContext('2d');
                graficoGerado = new Chart(ctx, {
                    type: 'bar',
                    data: {
                        labels: usuarios,
                        datasets: [{
                            label: 'Likes',
                            data: likes,
                            borderWidth: 1,
                            backgroundColor: ['gold', 'silver', '#cd7f32', '#b87333', '#a67d3d'],
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        legend: {
                            display: true,
                            labels: {
                                fontColor: '#333',
                                fontSize: 14
                            }
                        },
                        scales: {
                            xAxes: [{
                                gridLines: {
                                    display: false
                                },
                                ticks: {
                                    fontColor: '#333',
                                    fontSize: 14
                                }
                            }],
                            yAxes: [{
                                gridLines: {
                                    drawBorder: false,
                                    color: ['#ccc', '#ccc', '#ccc', '#ccc', '#ccc', '#eee'],
                                    lineWidth: [1, 1, 1, 1, 1, 2]
                                },
                                ticks: {
                                    fontColor: '#333',
                                    fontSize: 14,
                                    beginAtZero: true,
                                    callback: function (value, index, values) {
                                        return '$' + value;
                                    }
                                }
                            }]
                        },
                        indexAxis: 'x',
                    }
                })

            })
            .catch(error => {
                console.error('Ocorreu um erro:', error);
            });

        ranking();
    </script>

</body>

</html>